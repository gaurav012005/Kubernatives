
# ğŸ“¦âœ¨ Kubernetes Essentials: StatefulSets, ConfigMaps, Secrets & More!

---

## ğŸ› ï¸ğŸ“¦ What is a StatefulSet?

A **StatefulSet** manages **stateful applications**. Unlike Deployments, each Pod gets a **stable identity** (name, storage, network) across restarts.

Great for:
- ğŸ›¢ï¸ Databases (MySQL, MongoDB)
- ğŸ” Queues/Brokers
- ğŸ§  Apps needing stable storage or ordered updates

### ğŸ“„ Sample YAML â€“ StatefulSet

```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: web
spec:
  serviceName: "nginx"
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
        - name: nginx
          image: nginx:1.21
          ports:
            - containerPort: 80
              name: web
          volumeMounts:
            - name: www
              mountPath: /usr/share/nginx/html
  volumeClaimTemplates:
    - metadata:
        name: www
      spec:
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 1Gi
```

---

## ğŸ§© What is a ConfigMap?

A **ConfigMap** stores **non-sensitive configuration data** as key-value pairs. Useful for:

ğŸŒ± Environment variables  
ğŸ“„ Config files  
ğŸ§µ CLI arguments  

### ğŸ“„ Sample YAML â€“ ConfigMap

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_ENV: "production"
  LOG_LEVEL: "debug"
```

ğŸ‘‰ **Use in a Pod:**

```yaml
spec:
  containers:
    - name: myapp
      image: myapp:latest
      envFrom:
        - configMapRef:
            name: app-config
```

---

## ğŸ”ğŸ—ï¸ What is a Secret?

A **Secret** stores **sensitive data** like passwords and tokens, safely encoded with base64.

Used for:
- ğŸ—ƒï¸ DB passwords
- ğŸ” TLS certificates
- ğŸ“² API keys

### ğŸ“„ Sample YAML â€“ Secret

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: db-secret
type: Opaque
data:
  username: YWRtaW4=        # admin
  password: c2VjcmV0MTIz    # secret123
```

ğŸ‘‰ **Use in a Pod:**

```yaml
spec:
  containers:
    - name: app
      image: myapp:latest
      env:
        - name: DB_USER
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: username
        - name: DB_PASS
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: password
```

---

## ğŸ“ŠğŸ’¡ Resource Quotas & Limits

ğŸ¯ **ResourceQuota**: Limits total usage of resources (CPU, memory, pods) per namespace  
ğŸ§± **LimitRange**: Sets per-Pod or per-Container min/max values  

### ğŸ“„ ResourceQuota YAML

```yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  name: compute-resources
  namespace: dev
spec:
  hard:
    pods: "10"
    requests.cpu: "4"
    requests.memory: 2Gi
    limits.cpu: "8"
    limits.memory: 4Gi
```

### ğŸ“„ LimitRange YAML

```yaml
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-cpu-limits
  namespace: dev
spec:
  limits:
    - default:
        cpu: 500m
        memory: 256Mi
      defaultRequest:
        cpu: 250m
        memory: 128Mi
      type: Container
```

---

## ğŸ©ºğŸ” What are Probes?

**Probes monitor container health** for reliability and auto-healing.

âœ… **Readiness Probe** â†’ Ready to serve traffic?  
â¤ï¸ **Liveness Probe** â†’ Still alive or needs restart?  
ğŸš€ **Startup Probe** â†’ Finished booting?  

### ğŸ“„ All Probes in Action

```yaml
livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 5

startupProbe:
  httpGet:
    path: /startup
    port: 8080
  failureThreshold: 30
  periodSeconds: 10
```

ğŸ§© Add these under your containerâ€™s `spec:` in a Pod or Deployment!

---

## âš ï¸ğŸš« Taints & Tolerations

**Taints** prevent Pods from scheduling on a node unless they "tolerate" it.  
**Tolerations** allow specific Pods to run on tainted nodes.

Used to:
- ğŸ›¡ï¸ Reserve nodes for special workloads
- ğŸš§ Prevent mis-scheduling
- ğŸ’¡ Isolate GPU or high-memory nodes

### ğŸ”§ Taint a Node

```bash
kubectl taint nodes node1 key=value:NoSchedule
```

â›” â€œDonâ€™t schedule anything here unless tolerated!â€

### ğŸ“„ Toleration YAML for a Pod

```yaml
tolerations:
  - key: "key"
    operator: "Equal"
    value: "value"
    effect: "NoSchedule"
```

ğŸ§© Add under `spec:` in your Pod or Deployment.

---

